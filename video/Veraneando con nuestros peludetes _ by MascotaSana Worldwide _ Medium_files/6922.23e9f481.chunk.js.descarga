(self.webpackChunklite=self.webpackChunklite||[]).push([[6922],{86922:(e,n,t)=>{"use strict";t.d(n,{t:()=>Xe});var i=t(67294),o=t(22122),l=t(34699),a=t(96156),r=t(48403),d=t.n(r),c=t(64718),s=t(14045),u=t(39215),m=t(56842),p=t(23768),v=t(32947),k=t(70028),f=t(66021),E=t(90833),g=t(70679),h=t(16880),S=t(49989),b=t(75412),y=t(71652),w=t(87329),x=t(84683),N={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionSubmissionOption_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}].concat((0,w.Z)(x.d.definitions))},F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CollectionSubmissionPopoverQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"writerCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"adminCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}}]}}]}}].concat((0,w.Z)(N.definitions))},C=t(85965),P=t(25267),I=t(38352),O=t(77355),D=t(93310),T=t(91583),A=t(47230),R=t(66227),_=t(73917),L=t(70310),M=t(87691),V=t(20113),j=t(90586),U=t(34135),Z="collectionSubmissionPopover",B=[{name:"",value:"No publication",content:i.createElement(O.x,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},i.createElement(M.F,{scale:"M",color:"DARKER"},"No publication"))}];function K(e){var n=e.collection;return n.name?i.createElement(O.x,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},i.createElement(M.F,{scale:"M",color:"DARKER"},n.name),i.createElement(y.v,{collection:n,size:32})):null}function H(e){var n=e.show,t=e.post,o=t.statusForCollection,a=t.isPublished,r=i.useState(!1),d=(0,l.Z)(r,2),c=d[0],s=d[1];return c||U.V6.on("load",(function(){return s(!0)})),!o&&a&&c?i.createElement(Q,{post:t,noQueryReturn:null},(function(e){var o=e.loading,l=e.error,a=e.data;if(o||l)return null;var r=(void 0===a?{viewer:void 0}:a).viewer,d=t.creator;if(!r||!d||r.id!==d.id)return null;var c=r.adminCollections,s=r.writerCollections;return 0===c.length&&0===s.length?null:i.createElement(I.Sl,null,i.createElement(D.r,{"aria-controls":Z,"aria-expanded":"false",onClick:n},"Add to publication"))})):null}function z(e){var n=e.isVisible,t=e.hide;return i.createElement(T.V,{isVisible:n,hide:t,withCloseButton:!0},i.createElement(O.x,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},i.createElement(V.X6,{scale:"M",tag:"h3"},"Story submitted"),i.createElement(O.x,{paddingTop:"8px",paddingBottom:"24px"},i.createElement(j.QE,{scale:"M"},"Weâ€™ll email you when the publication editor has reviewed your submission.")),i.createElement(A.zx,{buttonStyle:"OBVIOUS",onClick:t},"OK")))}var Q=function(e){var n=e.children,t=e.post,o=e.noQueryReturn,l=t.creator;return l?i.createElement(P.I,null,(function(e){return e?e.id!==l.id?o:i.createElement(b.A,{query:F,ssr:!1},(function(e){var t=e.loading,i=e.error,o=e.data;return n({loading:t,error:i,data:o})})):o})):o},G=function(e){var n=e.post,t=e.hide,o=e.showLoadingIndicator,a=e.isVisible,r=e.children,d=i.useState(!1),c=(0,l.Z)(d,2),s=c[0],u=c[1],m=i.useState(""),p=(0,l.Z)(m,2),v=p[0],k=p[1],f=(0,C.h3)(n),E=(0,C.Lf)(n);return s||U.V6.on("load",(function(){return u(!0)})),n.isPublished&&s?i.createElement(R.B,null,(function(e){var l=e.isVisible,d=e.hide,c=e.show;return i.createElement(i.Fragment,null,i.createElement(z,{hide:d,isVisible:l}),i.createElement(Q,{post:n,noQueryReturn:r},(function(e){var l=e.loading,d=e.error,s=e.data;if(l||d)return r;var u=(void 0===s?{viewer:void 0}:s).viewer,m=n.creator;if(!u||!m||u.id!==m.id)return r;var p=u.adminCollections,g=u.writerCollections;if(0===p.length&&0===g.length)return r;var h=p.concat(g).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:i.createElement(K,{collection:e})}})),S=B.concat(h),b=p.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),y=g.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),w="";if(v){var x=S.find((function(e){return e.name===v}));x&&(w=x.value)}var N="addStoryToPublicationTitle";return i.createElement(_.J,{ariaId:Z,hide:t,isVisible:a,popoverRenderFn:function(){return i.createElement(O.x,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},i.createElement(M.F,{scale:"M",color:"DARKER",ariaLabelledById:N},"Add your story to a publication:"),i.createElement(O.x,{marginTop:"10px",position:"relative"},i.createElement(O.x,{position:"absolute",height:"16px",width:"100%",bottom:"0",zIndex:"100",backgroundImage:"linear-gradient(transparent, #ffffff)"}),i.createElement(O.x,{maxHeight:"160px",overflow:"auto"},i.createElement(L.E,{value:w,onChange:k,options:S,radioButtonsName:"addStory",ariaLabelledBy:N}))),i.createElement(O.x,{display:"flex",marginTop:"20px"},v in b?i.createElement(A.zx,{onClick:function(){var e=b[v];t(),o(),f(e).then((function(){window.location.reload()}))},buttonStyle:"OBVIOUS"},"Add story"):i.createElement(A.zx,{onClick:function(){var e=y[v];E(e),t(),c()},disabled:!v},"Submit"),i.createElement(O.x,{marginLeft:"10px"},i.createElement(M.F,{scale:"M",color:"LIGHTER"},i.createElement(D.r,{onClick:t},i.createElement(O.x,{padding:"10px"},"Cancel"))))),i.createElement(O.x,{marginTop:"10px"},i.createElement(M.F,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},r)})))})):r},W=t(86706),q=t(78285),J=function(e){var n=e.children,t=e.isVisible,o=e.post,l=e.hide,a=e.showLoadingIndicator,r=(0,C.h3)(o),d=(0,C.yb)(o),c=(0,W.I0)(),s=o.pendingCollection;return s?i.createElement(_.J,{ariaId:"manageSubmissionPopover",isVisible:t,hide:l,popoverRenderFn:function(){return i.createElement(O.x,{padding:"16px",maxWidth:"280px"},i.createElement(O.x,{display:"flex",flexDirection:"row",alignItems:"center"},i.createElement(O.x,{paddingRight:"8px"},i.createElement(y.v,{collection:s,size:40})),i.createElement(M.F,{scale:"S"},"This draft is submitted to ",s.name,".")),i.createElement(O.x,{flexDirection:"row",display:"flex",paddingTop:"16px"},i.createElement(O.x,{paddingRight:"8px"},i.createElement(A.zx,{buttonStyle:"OBVIOUS",onClick:function(){l(),a(),r(o.pendingCollection).then((function(){window.location.reload()}))}},"Accept")),i.createElement(A.zx,{buttonStyle:"SUBTLE",onClick:function(){d(o.pendingCollection).then((function(){c((0,q.Dx)({message:"Story removed from ".concat(s.name||"publication")}))})),l()}},"Don't accept")))}},n):n},X=function(e,n){return n&&e.creator&&n.id===e.creator.id},Y=t(39727),$="removeFromPublicationPopover",ee=function(e){var n=e.viewer,t=e.show,o=e.post,l=(0,Y.g)(o.pendingCollection||o.collection).viewerEdge,a=null==l?void 0:l.isEditor;return n&&("APPROVED"===o.statusForCollection&&(a||function(e,n){var t=e.pendingCollection||e.collection;return t&&t.creator&&n.id===t.creator.id}(o,n)||X(o,n))||"PENDING"===o.statusForCollection&&X(o,n))?i.createElement(I.Sl,null,i.createElement(D.r,{"aria-controls":$,"aria-expanded":"false",onClick:t},"Remove story from publication")):null},ne=function(e){var n=e.children,t=e.isVisible,o=e.hide,l=e.post,a=e.viewer,r=(0,W.I0)(),d=(0,C.yb)(l),c=l.collection||l.pendingCollection;return c?i.createElement(_.J,{ariaId:$,isVisible:t,hide:o,popoverRenderFn:function(){return i.createElement(O.x,{padding:"16px",maxWidth:"280px"},i.createElement(O.x,{display:"flex",flexDirection:"row",alignItems:"center"},i.createElement(O.x,{paddingRight:"8px"},i.createElement(y.v,{collection:c,size:40})),"APPROVED"===l.statusForCollection?i.createElement(M.F,{scale:"S"},X(l,a)?"Your":"This"," story is published in"," ",c.name,"."):"PENDING"===l.statusForCollection?i.createElement(M.F,{scale:"S"},"Your story is being reviewed by ",c.name," editors."):i.createElement(M.F,{scale:"S"},"This draft is submitted to ",c.name)),i.createElement(O.x,{flexDirection:"row",display:"flex",paddingTop:"16px"},i.createElement(O.x,{paddingRight:"8px"},i.createElement(A.zx,{buttonStyle:"SUBTLE",onClick:function(){d(c).then((function(){r((0,q.Dx)({message:"Story removed from ".concat(c.name||"publication")}))}),(function(){r((0,q.Dx)({message:"There was a problem removing the story from ".concat(c.name||"publication"),toastStyle:"ERROR"}))})),o()}},"PENDING"===l.statusForCollection?"Cancel submission":"Remove from ".concat(c.name||"")))))}},n):n},te=t(43220),ie=t(31048),oe=t(74302),le=t(44573),ae=t(6443),re=t(39507),de=t(18733),ce=t(26350),se=t(96462),ue=t(45509),me=t(37774),pe=t(1383),ve=t(14646),ke=t(92661),fe=t(75221),Ee=t(43487),ge=t(43303),he=t(68894),Se=t(50458),be=t(92001),ye=t(93647),we=t(36736),xe=t(91727),Ne=t(38487),Fe=t(57477),Ce={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}},{kind:"Field",name:{kind:"Name",value:"curationEligibleAt"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"inResponseToPostResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToCatalogResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_creator"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AddToCatalogBase_post"}}]}}].concat((0,w.Z)(be.m.definitions),(0,w.Z)(ye.C.definitions),(0,w.Z)(be.G.definitions),(0,w.Z)(we.x.definitions),(0,w.Z)(xe.S.definitions),(0,w.Z)(Ne.g.definitions),(0,w.Z)(Fe._C.definitions))},Pe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorActionOverflowPopoverQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"}}]}}]}}].concat((0,w.Z)(Ce.definitions))};function Ie(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Oe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ie(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ie(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var De=function(e){var n=(0,c.a)(Pe,{variables:{postId:e.post.id}}).data;if(null==n||!n.post)return null;var t=Oe(Oe({},e),{},{post:n.post});return i.createElement(Te,t)},Te=function(e){var n,t,a=e.post,r=e.showLoadingIndicator,c=e.hideUndoApplause,b=void 0!==c&&c,y=e.isResponsive,w=e.popoverPositioningStrategy,x=e.hideAddToList,N=void 0===x||x,F=e.hideOnScroll,C=e.testId,P=a.creator,T=a.collection,A=i.useState(!1),R=(0,l.Z)(A,2),L=R[0],M=R[1],V=i.useState(!1),j=(0,l.Z)(V,2),U=j[0],Z=j[1],B=i.useState(!1),K=(0,l.Z)(B,2),z=K[0],Q=K[1],W=(0,ve.I)(),X=(0,de.Uo)(),$=a.allowResponses,be=a.pendingCollection,ye=a.mediumUrl,we=a.visibility,xe=(0,Y.g)(T).viewerEdge,Ne=(0,Y.g)(be).viewerEdge,Fe=(0,re.T)(a).viewerEdge,Ce=(0,q.w)(),Pe=(0,ae.H)().value,Ie=null==Pe?void 0:Pe.id,Oe=a.responseDistribution===fe.Et.DISTRIBUTED,De=!!a.inResponseToPostResult||!!a.inResponseToCatalogResult,Te=De?"response":"story",Ae=(0,ie.KQ)(a),Re=(0,l.Z)(Ae,2),_e=Re[0],Le=Re[1],Me=(0,te.U)(a.collection),Ve=(0,te.U)(a.creator),je=i.useCallback((function(e){var n,t,i;Ce({extraParams:{collectionName:(null===(n=a.collection)||void 0===n?void 0:n.name)||"",becamePinned:!(null===(t=e.data)||void 0===t||null===(i=t.setPinnedAt)||void 0===i||!i.pinnedAt)},toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(n=a.collection)||void 0===n?void 0:n.name]),Ue=i.useCallback((function(e,n){var t;"MutationSuccess"===(null===(t=e.data)||void 0===t?void 0:t.setPostPinnedOnCreatorProfile.__typename)&&Ce({message:"This ".concat(Te,n?" has been unpinned from your profile's homepage":" has been pinned to your profile's homepage")})}),[]),Ze=i.useCallback((function(){Le().then(je)}),[Le,je,null==a||null===(t=a.collection)||void 0===t?void 0:t.name]),Be=(0,ie.In)(a),Ke=(0,l.Z)(Be,2),He=Ke[0],ze=Ke[1],Qe=i.useCallback((function(){ze().then((function(e){return Ue(e,He)}))}),[ze,Ue]),Ge=(0,Ee.v9)((function(e){return e.config.authDomain})),We=i.useState(!1),qe=(0,l.Z)(We,2),Je=qe[0],Xe=qe[1],Ye=(0,he.O)(!1),$e=(0,l.Z)(Ye,3),en=$e[0],nn=$e[1],tn=$e[2],on=(0,he.O)(!1),ln=(0,l.Z)(on,4),an=ln[0],rn=ln[2],dn=ln[3],cn=(0,k.j)(a.id),sn=(0,l.Z)(cn,1)[0],un=(0,he.O)(!1),mn=(0,l.Z)(un,3),pn=mn[0],vn=mn[1],kn=mn[2],fn=(0,ke.qt)("ShowHome",{}),En=i.useCallback((function(){sn().then((function(){window.location.assign(fn)}))}),[sn,fn]),gn="Delete story";Oe?gn="Delete story and response":De&&(gn="Delete response");var hn=Oe?oe.Q:i.createElement(s.M,{entityName:Te}),Sn=(0,le.P5)("can_edit_members_only_posts");if(!P||!Pe)return null;var bn=Ie===P.id,yn=(null==xe?void 0:xe.isEditor)||(null==Ne?void 0:Ne.isEditor),wn=bn||yn,xn=Sn&&a&&a.isLocked,Nn=wn||xn,Fn="creatorActionOverflowMenu",Cn="LOCKED"===we,Pn=yn&&!bn||!wn,In=!De||Oe,On=function(){Oe&&(rn(),nn())};if(Je)return i.createElement(E.l,{to:(0,Se.d0)(Ge,a.id)});var Dn={kind:fe.ej.POST,target:a};return i.createElement(i.Fragment,null,i.createElement(pe.Q,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:en,onConfirm:function(){Xe(!0)},hide:tn,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},oe.t),i.createElement(pe.Q,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:pn,onConfirm:En,hide:kn,titleText:gn,confirmText:"Delete",isDestructiveAction:!0},hn),i.createElement(p.a,(0,o.Z)({},Dn,{viewer:Pe}),(function(e){var n=e.onClick;return i.createElement(_.J,{targetDistance:10,ariaId:Fn,isVisible:an,hide:rn,positioningStrategy:w,hideOnScroll:F,popoverRenderFn:function(){return i.createElement(I.mX,null,i.createElement(i.Fragment,null,i.createElement(v.l,{type:"popover",handleClick:On,href:(0,Se.d0)(Ge,a.id),isVisible:!!Nn},"Edit ",Te),T&&yn&&Me&&In&&i.createElement(I.Sl,null,i.createElement(D.r,{onClick:Ze},_e?"Unpin this ".concat(Te," from "):"Pin this ".concat(Te," to "),T.name)),bn&&Ve&&In&&i.createElement(I.Sl,null,i.createElement(D.r,{onClick:Qe},He?"Unpin this ".concat(Te," from your profile"):"Pin this ".concat(Te," to your profile"))),i.createElement(g.w,{post:a,onClick:rn,menuStyle:"TEXT"}),wn?i.createElement(i.Fragment,null,i.createElement(I.oK,null),i.createElement(I.Sl,null,i.createElement(D.r,{href:(0,Se.KI)(Ge,a.id)},d()(Te)," settings"))):null,wn&&i.createElement(I.Sl,null,i.createElement(D.r,{href:(0,Se.T0)(Ge,a.id)},d()(Te)," stats")),wn&&Cn&&ye&&(null==Fe?void 0:Fe.shareKey)&&i.createElement(h.$,{post:a,shareKey:null==Fe?void 0:Fe.shareKey}),wn&&i.createElement(I.oK,null),wn?i.createElement(i.Fragment,null,i.createElement(S.r,{hidePopover:rn,postId:a.id,allowResponses:$}),!N&&i.createElement(I.Sl,null,i.createElement(D.r,{"aria-controls":Fn,"aria-expanded":"false",onClick:function(e){rn(),n(e)}},"Add to list")),i.createElement(H,{post:a,show:function(){Z(!0),rn()}}),i.createElement(ee,{viewer:Pe,post:a,show:function(){Q(!0),rn()}}),bn&&i.createElement(I.Sl,null,i.createElement("div",{className:W({color:X.baseTheme.colorTokens.foreground.error.primary.base})},i.createElement(D.r,{onClick:(0,ge.B)(rn,vn)},"Delete ",Te)))):null,Pn?i.createElement(i.Fragment,null,yn&&i.createElement(I.oK,null),!b&&i.createElement(m.T,{post:a,hidePopover:rn}),i.createElement(i.Fragment,null,Ie?i.createElement(me.z,{targetUserId:P.id,postId:a.id,hidePopover:rn,viewerId:Ie}):i.createElement(I.Sl,null,i.createElement(ce.R,{operation:"register",post:a,susiEntry:"report_footer"},"Report this ",Te))),i.createElement(f.q,{hidePopover:rn,creator:P,collection:T,postId:a.id}),i.createElement(se.F,{hidePopover:rn,creator:P,viewer:Pe}),i.createElement(ue.j,{hidePopover:rn,creator:P,viewer:Pe})):null))}},i.createElement(G,{post:a,isVisible:U,hide:function(){Z(!1)},showLoadingIndicator:r},i.createElement(ne,{viewer:Pe,post:a,isVisible:z,hide:function(){Q(!1)}},i.createElement(J,{post:a,isVisible:L,hide:function(){M(!1)},showLoadingIndicator:r},i.createElement(O.x,{flexGrow:"0",marginRight:"-4px"},i.createElement(u.c,{ariaControls:Fn,ariaExpanded:an?"true":"false",ariaLabel:"More options",onClick:function(){L?M(!1):U?Z(!1):dn()},isResponsive:y,tooltipText:"More",testId:C}))))))})))},Ae=t(17778),Re=t(78038),_e=t(66411),Le=t(77280);function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Me.apply(this,arguments)}var Ve=i.createElement("path",{d:"M6.2 16.8A7.5 7.5 0 1 0 16.8 6.2 7.5 7.5 0 0 0 6.2 16.8z",stroke:"#000",strokeWidth:2,strokeLinecap:"round"}),je=i.createElement("path",{d:"M6 6l11 11",stroke:"#000",strokeWidth:2});const Ue=function(e){return i.createElement("svg",Me({width:19,height:19,viewBox:"0 0 23 23",fill:"none"},e),Ve,je)};var Ze=t(51615),Be=t(59250),Ke=t(61095),He=t(18627),ze=function(e){var n=e.creatorId,t=e.muteAuthor,o=e.hidePopover,l=e.eventData,a=e.isActiveExpandedPost,r=e.unfollowUser,d=(0,_e.pK)(),c=(0,He.A)(),s={id:n||""},u=(0,Ke.Pd)(s).viewerEdge,m=!(null==u||!u.isFollowing),p=!(null==u||!u.isMuting),v=(0,Ze.k6)(),k=(0,Be.jM)(),f=k.mutedAuthorIds,E=k.setMutedAuthorIds,g=k.isMutingFromHomeFeed,h=i.useCallback((function(e){E([].concat((0,w.Z)(f),[e]))}),[f]);return n?m?i.createElement(I.Sl,null,i.createElement(D.r,{onClick:function(){c.event("user.unfollowed",{targetUserId:n,source:d}),r(),o()}},"Unfollow this author")):p?null:i.createElement(I.Sl,null,i.createElement(D.r,{onClick:function(){c.event("user.muted",l),t(),g&&(h(n),a&&v.goBack()),o()}},"Mute this author")):null},Qe=function(e){var n=e.collectionId,t=e.hidePopover,o=e.mutePub,l=e.eventData,a=e.isActiveExpandedPost,r=e.unfollowCollection,d=(0,He.A)(),c=(0,_e.pK)(),s={id:n||""},u=(0,Y.g)(s).viewerEdge,m=!(null==u||!u.isFollowing),p=!(null==u||!u.isMuting),v=(0,Be.jM)(),k=v.mutedPubIds,f=v.setMutedPubIds,E=v.isMutingFromHomeFeed,g=(0,Ze.k6)(),h=i.useCallback((function(e){f([].concat((0,w.Z)(k),[e]))}),[k]);return n?m?i.createElement(I.Sl,null,i.createElement(D.r,{onClick:function(){d.event("collection.unfollowed",{collectionId:n,followSource:c}),r(),t()}},"Unfollow this publication")):p?null:i.createElement(I.Sl,null,i.createElement(D.r,{onClick:function(){d.event("collection.muted",l),o(),E&&(h(n),a&&g.goBack()),t()}},"Mute this publication")):null},Ge=t(42732);function We(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function qe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?We(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):We(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Je=function(e){var n=e.post,t=e.creatorId,a=e.collectionId,r=e.isActiveExpandedPost,d=e.setDismissedPostId,c=e.isResponsive,s=e.hideNegativeSignalItem,v=e.popoverPositioningStrategy,k=e.hideAddToList,f=void 0===k||k,E=e.viewer,g=e.hideOnScroll,h=e.testId,S=n.id,b=(0,he.O)(!1),y=(0,l.Z)(b,4),w=y[0],x=y[2],N=y[3],F=null==E?void 0:E.id,C=(0,Re.l)(t,a),P=C.muteAuthor,T=C.mutePub,A=(0,Ae.l)(t,a),R=A.unfollowUser,L=A.unfollowCollection,M=(0,_e.pK)(),V=(0,Le.PM)(),j=(0,Ee.v9)((function(e){return e.navigation.referrer})),U=(0,Ee.v9)((function(e){return e.navigation.currentLocation})),Z={postId:S,location:U,referrer:j,source:M,referrerSource:V},B=(0,Ge.c)({post:n,onShowLess:x,isActiveExpandedPost:r,collectionId:a,setDismissedPostId:d}).handleShowLess,K={kind:fe.ej.POST,target:n},H=(0,i.useCallback)((function(e){return i.createElement(I.mX,null,!s&&i.createElement(O.x,{borderBottom:"neutral.primary",paddingBottom:"4px",marginBottom:"4px"},i.createElement(I.Sl,null,i.createElement(D.r,{onClick:B,"aria-label":"Show less like this"},i.createElement(O.x,{display:"flex",flexDirection:"row",alignItems:"center",borderBottom:void 0,ariaHidden:"true"},i.createElement(O.x,{marginRight:"4px"},i.createElement(Ue,null)),i.createElement(O.x,null,"Show less like this"))))),!f&&i.createElement(I.Sl,null,i.createElement(D.r,{"aria-controls":"aria-id","aria-expanded":"false",onClick:function(){x(),e()}},"Add to list")),i.createElement(m.T,{post:n,hidePopover:x}),i.createElement(ze,{creatorId:t,muteAuthor:P,isActiveExpandedPost:r,hidePopover:x,eventData:qe({targetUserId:t},Z),unfollowUser:R}),a&&i.createElement(Qe,{collectionId:a,mutePub:T,isActiveExpandedPost:r,hidePopover:x,eventData:qe({collection:a},Z),unfollowCollection:L}),i.createElement(me.z,{postId:S,viewerId:F,targetUserId:t||"",shouldShowShortenedCopy:!0,hidePopover:x}))}),[]);return t?i.createElement(p.a,(0,o.Z)({},K,{viewer:E}),(function(e){var n=e.onClick;return i.createElement(_.J,{isVisible:w,positioningStrategy:v,targetDistance:10,hide:x,popoverRenderFn:function(){return H(n)},hideOnScroll:g},i.createElement(u.c,{onClick:N,ariaLabel:"More options",isResponsive:c,tooltipText:"More",testId:h}))})):null},Xe=function(e){var n=e.post,t=e.isActiveExpandedPost,o=e.setDismissedPostId,l=e.isResponsive,a=e.hideNegativeSignalItem,r=e.popoverPositioningStrategy,d=e.hideAddToList,c=void 0===d||d,s=e.hideOnScroll,u=e.testId,m=n.creator,p=n.collection,v=n.visibility,k=(0,ae.H)(),f=k.loading,E=k.value,g=(0,Y.g)(p).viewerEdge,h=!f&&!!E,S=!(null==g||!g.isEditor),b=(null==E?void 0:E.id)===(null==m?void 0:m.id),y=c||v===fe.Wn.UNLISTED;return m&&h?S||b?i.createElement(R.B,null,(function(e){var t=e.show;return i.createElement(De,{post:n,showLoadingIndicator:t,isResponsive:l,popoverPositioningStrategy:r,hideAddToList:y,hideOnScroll:s,testId:u})})):i.createElement(Je,{post:n,creatorId:m.id,collectionId:null==p?void 0:p.id,isActiveExpandedPost:t,setDismissedPostId:o,isResponsive:l,hideNegativeSignalItem:a,popoverPositioningStrategy:r,hideAddToList:y,viewer:E,hideOnScroll:s,testId:u}):null}},42732:(e,n,t)=>{"use strict";t.d(n,{c:()=>E});var i=t(87329),o=t(82492),l=t.n(o),a=t(26075),r=t(90386),d=t(67294),c=t(51615),s=t(59250),u=t(25550),m=t(18627),p=t(66411),v=t(78285),k=t(77280),f=t(43487),E=function(e){var n=e.post,t=e.onShowLess,o=e.isActiveExpandedPost,E=e.collectionId,g=e.setDismissedPostId,h=n.id,S=(0,u.r)().viewerId,b=(0,c.k6)(),y=(0,s.jM)(),w=y.setSeeLessPostIds,x=y.isMutingFromHomeFeed,N=(0,v.w)(),F=(0,a.x)().cache,C=(0,m.A)(),P=(0,p.pK)(),I=(0,k.PM)(),O=(0,f.v9)((function(e){return e.navigation.referrer})),D=(0,f.v9)((function(e){return e.navigation.currentLocation})),T=(0,d.useRef)(null),A=(0,d.useCallback)((function(){T.current=window.setTimeout((function(){C.event("post.see_less",{userId:S,collection:E,postId:h,location:D,referrer:O,source:P,referrerSource:I})}),3e3)}),[]),R=(0,d.useCallback)((function(){null!==T.current&&window.clearTimeout(T.current)}),[]),_=(0,d.useCallback)((function(){F.modify({id:F.identify((0,r.kQ)("ROOT_QUERY")),fields:{webRecommendedFeed:function(e,n){var t=n.readField;return l()({},e,{items:e.items.filter((function(e){return(null==e?void 0:e.post)&&t("id",e.post)!==h}))})},intentionalFeed:function(e,n){var t=n.readField;return l()({},e,{items:e.items.filter((function(e){return!("HomeFeedItem"===(null==e?void 0:e.__typename)&&null!=e&&e.post&&t("id",e.post)===h)}))})}}})}),[h]);return{handleShowLess:(0,d.useCallback)((function(){A(),_(),x&&(w((function(e){return[].concat((0,i.Z)(e),[h])})),o&&b.goBack(),null==g||g(h)),N({toastStyle:"USER_NEGATIVE_SIGNAL",extraParams:{onClickUndo:R}}),null==t||t()}),[])}}},92001:(e,n,t)=>{"use strict";t.d(n,{m:()=>i,G:()=>o});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MutePopoverOptions_creator"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]},o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MutePopoverOptions_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},93647:(e,n,t)=>{"use strict";t.d(n,{C:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"auroraHooks_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraEligible"}},{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}}]}}]}}]}},43220:(e,n,t)=>{"use strict";t.d(n,{U:()=>i,I:()=>o});var i=function(e){return!!e&&(e.isAuroraVisible||"Collection"===e.__typename&&e.isAuroraEligible&&e.viewerEdge.isEditor)},o=function(e){return!!e&&("Collection"===e.__typename?e.isAuroraVisible||e.isAuroraEligible&&e.viewerEdge.isEditor:e.isAuroraVisible)}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/6922.23e9f481.chunk.js.map