(self.webpackChunklite=self.webpackChunklite||[]).push([[6616],{36579:(e,n,t)=>{"use strict";t.d(n,{D:()=>o});var i=t(87329),a=t(46732),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ExpandablePostCardReaderButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}}].concat((0,i.Z)(a.JP.definitions))},o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ExpandablePostCardOverflowButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ExpandablePostCardReaderButton_post"}}]}}].concat((0,i.Z)(l.definitions))}},78060:(e,n,t)=>{"use strict";t.d(n,{u:()=>te});var i=t(67294),a=t(22122),l=t(34699),o=t(96156),r=t(64718),d=t(14045),s=t(39215),m=t(56842),c=t(32947),u=t(70028),p=t(66021),k=t(70679),v=t(16880),f=t(49989),E=t(85965),S=t(31048),N=t(74302),b=t(6443),C=t(39507),F=t(18733),y=t(38352),g=t(96462),h=t(45509),w=t(37774),P=t(1383),I=t(73917),T=t(93310),D=t(82515),O=t(87691),x=t(14646),Z=t(92661),M=t(75221),R=t(43487),_=t(43303),V=t(68894),j=t(50458),U=t(87329),K=t(36736),B=t(91727),L=t(38487),W={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ExpandablePostCardEditorWriterButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CopyFriendLinkMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}}]}}].concat((0,U.Z)(K.x.definitions),(0,U.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"CopyFriendLinkMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]),(0,U.Z)(B.S.definitions),(0,U.Z)(L.g.definitions))},q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExpandablePostCardEditorWriterButtonQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ExpandablePostCardEditorWriterButton_post"}}]}}]}}].concat((0,U.Z)(W.definitions))};function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var H=function(e){var n=(0,r.a)(q,{variables:{postId:e.post.id}}).data;if(null==n||!n.post)return null;var t=Q(Q({},e),{},{post:n.post});return i.createElement(J,t)},J=function(e){var n=e.post,t=e.publisherContext,o=e.isEditor,r=e.isWriter,U=e.creator,K=e.prependMenuItems,B=e.rules,L=(0,x.I)(),W=(0,F.Uo)(),q=(0,R.v9)((function(e){return e.config.authDomain})),A=n.id,Q=n.collection,H=n.responseDistribution,J=n.visibility,X=n.mediumUrl,z=n.allowResponses,$=(0,b.H)().value,G=null==$?void 0:$.id,Y=null==U?void 0:U.id,ee=(0,C.T)(n).viewerEdge,ne=Q||{id:"",name:""},te=ne.id,ie=ne.name,ae=(0,V.O)(!1),le=(0,l.Z)(ae,3),oe=le[0],re=le[1],de=le[2],se=(0,S.n_)(n,t),me=(0,l.Z)(se,2),ce=me[0],ue=me[1],pe=i.useState(""),ke=(0,l.Z)(pe,2),ve=ke[0],fe=ke[1],Ee=i.useCallback((function(){de(),ue().then((function(e){var n=e.errors;n&&n.length&&n[0].message?fe(n[0].message):window.location.reload()}))}),[de,ue,fe]),Se=(0,E.yb)(n),Ne=(0,V.O)(!1),be=(0,l.Z)(Ne,3),Ce=be[0],Fe=be[1],ye=be[2],ge=i.useCallback((function(){Se(Q).then((function(){return window.location.reload()}))}),[te,Se]),he=(0,u.j)(A),we=(0,l.Z)(he,1)[0],Pe=(0,V.O)(!1),Ie=(0,l.Z)(Pe,3),Te=Ie[0],De=Ie[1],Oe=Ie[2],xe=(0,Z.qt)("ShowHome",{}),Ze=i.useCallback((function(){we().then((function(){window.location.assign(xe)}))}),[we,xe]),Me=H===M.Et.DISTRIBUTED,Re=(0,V.O)(!1),_e=(0,l.Z)(Re,3),Ve=_e[0],je=_e[1],Ue=_e[2],Ke={buttonStyle:"ERROR",cancelText:"Cancel"},Be="ExpandablePostCardEditorWriterMenu",Le="Delete story".concat(Me?" and response":""),We=Me?N.Q:i.createElement(d.M,null),qe="LOCKED"===J,Ae="User"===t&&r||"Collection"===t&&o,Qe=function(){Me&&(de(),je())};return i.createElement(i.Fragment,null,i.createElement(P.Q,(0,a.Z)({},Ke,{isVisible:Ce,onConfirm:ge,hide:ye,titleText:"Remove story",confirmText:"Remove",isDestructiveAction:!0}),"Are you sure you want to remove this story from ",ie,"?"),i.createElement(P.Q,(0,a.Z)({},Ke,{isVisible:Te,onConfirm:Ze,hide:Oe,titleText:Le,confirmText:"Delete",isDestructiveAction:!0}),We),i.createElement(P.Q,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:Ve,onConfirm:function(){var e=(0,j.d0)(q,A);window.location.replace(e)},hide:Ue,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},N.t),i.createElement(I.J,{ariaId:Be,hide:de,isVisible:oe,popoverRenderFn:function(){return i.createElement(y.mX,null,K&&i.createElement(i.Fragment,null,K(de)),i.createElement(c.l,{type:"popover",handleClick:Qe,href:(0,j.d0)(q,A)},"Edit story"),(o||r&&"User"===t)&&i.createElement(y.Sl,null,i.createElement(T.r,{onClick:Ee},ce?"Unpin":"Pin"," story")),i.createElement(k.w,{post:n,onClick:de,menuStyle:"TEXT"}),i.createElement(y.oK,null),i.createElement(y.Sl,null,i.createElement(T.r,{href:(0,j.KI)(q,A)},"Story settings")),i.createElement(y.Sl,null,i.createElement(T.r,{href:(0,j.T0)(q,A)},"Story stats")),qe&&X&&(null==ee?void 0:ee.shareKey)&&i.createElement(v.$,{post:n,shareKey:null==ee?void 0:ee.shareKey}),i.createElement(y.oK,null),Ae?i.createElement(f.r,{hidePopover:de,postId:n.id,allowResponses:z}):null,te&&i.createElement(y.Sl,null,i.createElement(T.r,{onClick:Fe},"Remove story from publication")),r&&i.createElement(y.Sl,null,i.createElement("div",{className:L({color:W.baseTheme.colorTokens.foreground.error.primary.base})},i.createElement(T.r,{onClick:(0,_.B)(de,De)},"Delete story"))),o&&!r&&i.createElement(i.Fragment,null,i.createElement(y.oK,null),i.createElement(m.T,{post:n,hidePopover:de}),i.createElement(w.z,{targetUserId:Y,postId:n.id,hidePopover:de,viewerId:G}),i.createElement(p.q,{hidePopover:de,creator:U}),i.createElement(g.F,{hidePopover:de,creator:U,viewer:$}),i.createElement(h.j,{hidePopover:de,creator:U,viewer:$})))}},i.createElement(s.c,{ariaControls:Be,ariaExpanded:oe?"true":"false",ariaLabel:"More options",onClick:re,tooltipText:"More",rules:B})),i.createElement(D.F,{isVisible:!!ve,hide:function(){return fe("")},duration:5e3},i.createElement(O.F,{scale:"M"},ve)))},X=t(86706),z=t(13195),$=t(25550),G=t(83486),Y=t(51681),ee=function(e){var n=e.post,t=e.viewer,a=e.prependMenuItems,o=e.rules,r=n.creator,d=null==r?void 0:r.id,m=(0,V.O)(!1),c=(0,l.Z)(m,3),u=c[0],k=c[1],v=c[2],f="expandablePostCardReaderMenu",E=(0,$.r)().viewerId,S=(0,C.T)(n).viewerEdge,N=(0,X.I0)(),b=i.useCallback((function(e){return N((0,G.at)(e))}),[N]),F=(0,R.b$)((function(e){return e.multiVote.clapsPerPost})),P=(0,Y.l)(F,n,S),D=P.clapCount,O=P.viewerClapCount,x=(0,z.C)();if(!d)return null;var Z=E&&D&&O&&O>0;return i.createElement(I.J,{ariaId:f,hide:v,isVisible:u,popoverRenderFn:function(){return i.createElement(y.mX,null,a&&i.createElement(i.Fragment,null,a(v)),!!Z&&i.createElement(y.Sl,null,i.createElement(T.r,{onClick:function(){return x(n,(null==t?void 0:t.id)||"",-O,S),b({postId:n.id,clapCount:D-O,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),void v()}},"Undo applause for this post")),i.createElement(w.z,{targetUserId:d,postId:n.id,hidePopover:v,viewerId:E}),i.createElement(p.q,{hidePopover:v,creator:r}),i.createElement(g.F,{hidePopover:v,creator:r,viewer:t}),i.createElement(h.j,{hidePopover:v,creator:r,viewer:t}))}},i.createElement(s.c,{ariaControls:f,ariaExpanded:u?"true":"false",ariaLabel:"More options",onClick:k,tooltipText:"More",rules:o}))},ne=t(39727),te=function(e){var n=e.post,t=e.publisherContext,a=e.prependMenuItems,l=e.rules,o=(0,b.H)().value,r=(0,ne.g)(n.collection).viewerEdge,d=!(null==r||!r.isEditor),s=n.creator,m=(null==o?void 0:o.id)===(null==s?void 0:s.id);return o?d||m?i.createElement(H,{post:n,isEditor:d,isWriter:m,publisherContext:t,creator:s,prependMenuItems:a,rules:l}):i.createElement(ee,{post:n,viewer:o,prependMenuItems:a,rules:l}):null}},48342:(e,n,t)=>{"use strict";t.d(n,{K:()=>r});var i=t(67294),a=t(14646),l=t(21372),o=function(e){return{color:e.colorTokens.foreground.neutral.secondary.base}},r=function(e){var n=e.readingTime,t=e.isLighterText,r=void 0!==t&&t,d=(0,a.I)();if(!n)return null;var s="".concat((0,l.Vd)(n)," min read");return i.createElement("span",{className:r?d(o):void 0},s)}},10654:(e,n,t)=>{"use strict";t.d(n,{x:()=>o});var i=t(87329),a=t(98007),l=t(1877),o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MultiVote_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_user"}}]}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_post"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"isLimitedState"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MultiVoteCount_post"}}]}}].concat((0,i.Z)(a.Vm.definitions),(0,i.Z)(a.qU.definitions),(0,i.Z)(l.U.definitions))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/6616.1a0018e7.chunk.js.map